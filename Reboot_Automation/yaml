trigger:
- none

pool:
  name: your-self-hosted-agent-pool

jobs:
- job: RunTests
  displayName: Run Tests
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.x'  # Specify the Python version you're using
      addToPath: true

  - script: |
      python check_system_status.py
    displayName: Check System Status

  - script: |
      if [ "$(SystemOnline)" == "true" ]; then
          echo "System is online. Running concurrent test cases..."
          # Run your concurrent test cases here
          echo "Running concurrent test cases..."
      else
          echo "System is offline or rebooting. Skipping test execution."
      fi
    displayName: Run Concurrent Tests
  condition: |
    and(
      succeeded(),
      ne(variables['Agent.JobStatus'], 'Canceled'),
      ne(variables['Agent.JobStatus'], 'Failed')
    )
